using Gtk 4.0;
using Adw 1;

template $DashboardPage : Gtk.Box {
  orientation: vertical;
  Adw.BreakpointBin {
    hexpand: true;
    vexpand: true;
    width-request: 350;
    height-request: 550;
    Adw.Breakpoint {
      condition ("max-width: 600sp")
      setters {
        split_view.collapsed: true;
        split_view_passwd.collapsed: false;
        button.visible: false;
      }
    }
    
    Adw.Breakpoint {
      condition ("max-width: 500sp")
      setters {
        split_view.collapsed: true;
        split_view_passwd.collapsed: true;
        button.visible: true;
      }
    }
    child: content;
  }
}

Adw.ToolbarView content {
  top-bar-style: raised;
  hexpand: true;
  [top]
  Adw.HeaderBar {
    [start]
    ToggleButton show_sidebar_button {
      icon-name: "dock-left";
      tooltip-text: _("Toggle Sidebar");
      active: bind split_view.show-sidebar;
    }
  }
  Adw.OverlaySplitView split_view {
    show-sidebar: bind show_sidebar_button.active;
    sidebar: Gtk.ScrolledWindow {
      Gtk.ListBox {
        styles ['navigation-sidebar']
        hexpand: true;
        Adw.ActionRow {
          title: _('All itens');
          [prefix]
          Gtk.Box {
            margin-start: 2;
            margin-end: 2;
            Gtk.Image {
              icon-name: 'grid-filled-symbolic';
            }
          }
        }
        Adw.ActionRow {
          title: _('Favorites');
          [prefix]
          Gtk.Box {
            margin-start: 2;
            margin-end: 2;
            Gtk.Image {
              icon-name: 'star-large-symbolic';
            }
          }
        }
        Adw.ActionRow {
          title: _('Garbage');
          [prefix]
          Gtk.Box {
            margin-start: 2;
            margin-end: 2;
            Gtk.Image {
              icon-name: 'user-trash-symbolic';
            }
          }
        }
        Adw.ActionRow {
          title: _('Folders');
          [prefix]
          Gtk.Box {
            margin-start: 2;
            margin-end: 2;
            Gtk.Image {
              icon-name: 'grid-filled-symbolic';
            }
          }
        }
      }
    };

    content: Adw.NavigationSplitView split_view_passwd {
      sidebar: Adw.NavigationPage {
        title: "Sidebar";
        tag: "sidebar";
        child: Adw.ToolbarView {
          content: Adw.StatusPage {
            title: _("Sidebar");

            Button button {
              visible: false;
              halign: center;
              can-shrink: true;
              label: _("Open Content");
              action-name: "navigation.push";
              action-target: "'content'";
              styles ["pill"]
            }
          };
        };
      };

      content: Adw.NavigationPage {
        title: "Content";
        tag: "content";
        child: Adw.ToolbarView {
          content: Adw.StatusPage {
            title: _("Content");

            LinkButton {
              label: "API Reference";
              uri: "https://gnome.pages.gitlab.gnome.org/libadwaita/doc/1.4/class.NavigationSplitView.html";
            }
          };
        };
      };
    };
  }
}

